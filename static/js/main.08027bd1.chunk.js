(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,a,t){},105:function(e,a,t){},131:function(e,a,t){},132:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),l=t.n(o),i=(t(104),t(105),t(16)),s=t(20),c=t(35),m=t.n(c),u=t(167),p=t(168),d=t(169),g=t(170),h=t(133),f=t(198),E=t(172),b=t(173);function y(e){function a(e,a){return e<<a|e>>>32-a}function t(e,a){var t,n,r,o,l;return r=2147483648&e,o=2147483648&a,l=(1073741823&e)+(1073741823&a),(t=1073741824&e)&(n=1073741824&a)?2147483648^l^r^o:t|n?1073741824&l?3221225472^l^r^o:1073741824^l^r^o:l^r^o}function n(e,n,r,o,l,i,s){return e=t(e,t(t(function(e,a,t){return e&a|~e&t}(n,r,o),l),s)),t(a(e,i),n)}function r(e,n,r,o,l,i,s){return e=t(e,t(t(function(e,a,t){return e&t|a&~t}(n,r,o),l),s)),t(a(e,i),n)}function o(e,n,r,o,l,i,s){return e=t(e,t(t(function(e,a,t){return e^a^t}(n,r,o),l),s)),t(a(e,i),n)}function l(e,n,r,o,l,i,s){return e=t(e,t(t(function(e,a,t){return a^(e|~t)}(n,r,o),l),s)),t(a(e,i),n)}function i(e){var a,t="",n="";for(a=0;a<=3;a++)t+=(n="0"+(e>>>8*a&255).toString(16)).substr(n.length-2,2);return t}var s,c,m,u,p,d,g,h,f,E;for(s=function(e){for(var a,t=e.length,n=t+8,r=16*((n-n%64)/64+1),o=Array(r-1),l=0,i=0;i<t;)l=i%4*8,o[a=(i-i%4)/4]=o[a]|e.charCodeAt(i)<<l,i++;return l=i%4*8,o[a=(i-i%4)/4]=o[a]|128<<l,o[r-2]=t<<3,o[r-1]=t>>>29,o}(e=function(e){e=e.replace(/rn/g,"n");for(var a="",t=0;t<e.length;t++){var n=e.charCodeAt(t);n<128?a+=String.fromCharCode(n):n>127&&n<2048?(a+=String.fromCharCode(n>>6|192),a+=String.fromCharCode(63&n|128)):(a+=String.fromCharCode(n>>12|224),a+=String.fromCharCode(n>>6&63|128),a+=String.fromCharCode(63&n|128))}return a}(e)),g=1732584193,h=4023233417,f=2562383102,E=271733878,c=0;c<s.length;c+=16)m=g,u=h,p=f,d=E,g=n(g,h,f,E,s[c+0],7,3614090360),E=n(E,g,h,f,s[c+1],12,3905402710),f=n(f,E,g,h,s[c+2],17,606105819),h=n(h,f,E,g,s[c+3],22,3250441966),g=n(g,h,f,E,s[c+4],7,4118548399),E=n(E,g,h,f,s[c+5],12,1200080426),f=n(f,E,g,h,s[c+6],17,2821735955),h=n(h,f,E,g,s[c+7],22,4249261313),g=n(g,h,f,E,s[c+8],7,1770035416),E=n(E,g,h,f,s[c+9],12,2336552879),f=n(f,E,g,h,s[c+10],17,4294925233),h=n(h,f,E,g,s[c+11],22,2304563134),g=n(g,h,f,E,s[c+12],7,1804603682),E=n(E,g,h,f,s[c+13],12,4254626195),f=n(f,E,g,h,s[c+14],17,2792965006),g=r(g,h=n(h,f,E,g,s[c+15],22,1236535329),f,E,s[c+1],5,4129170786),E=r(E,g,h,f,s[c+6],9,3225465664),f=r(f,E,g,h,s[c+11],14,643717713),h=r(h,f,E,g,s[c+0],20,3921069994),g=r(g,h,f,E,s[c+5],5,3593408605),E=r(E,g,h,f,s[c+10],9,38016083),f=r(f,E,g,h,s[c+15],14,3634488961),h=r(h,f,E,g,s[c+4],20,3889429448),g=r(g,h,f,E,s[c+9],5,568446438),E=r(E,g,h,f,s[c+14],9,3275163606),f=r(f,E,g,h,s[c+3],14,4107603335),h=r(h,f,E,g,s[c+8],20,1163531501),g=r(g,h,f,E,s[c+13],5,2850285829),E=r(E,g,h,f,s[c+2],9,4243563512),f=r(f,E,g,h,s[c+7],14,1735328473),g=o(g,h=r(h,f,E,g,s[c+12],20,2368359562),f,E,s[c+5],4,4294588738),E=o(E,g,h,f,s[c+8],11,2272392833),f=o(f,E,g,h,s[c+11],16,1839030562),h=o(h,f,E,g,s[c+14],23,4259657740),g=o(g,h,f,E,s[c+1],4,2763975236),E=o(E,g,h,f,s[c+4],11,1272893353),f=o(f,E,g,h,s[c+7],16,4139469664),h=o(h,f,E,g,s[c+10],23,3200236656),g=o(g,h,f,E,s[c+13],4,681279174),E=o(E,g,h,f,s[c+0],11,3936430074),f=o(f,E,g,h,s[c+3],16,3572445317),h=o(h,f,E,g,s[c+6],23,76029189),g=o(g,h,f,E,s[c+9],4,3654602809),E=o(E,g,h,f,s[c+12],11,3873151461),f=o(f,E,g,h,s[c+15],16,530742520),g=l(g,h=o(h,f,E,g,s[c+2],23,3299628645),f,E,s[c+0],6,4096336452),E=l(E,g,h,f,s[c+7],10,1126891415),f=l(f,E,g,h,s[c+14],15,2878612391),h=l(h,f,E,g,s[c+5],21,4237533241),g=l(g,h,f,E,s[c+12],6,1700485571),E=l(E,g,h,f,s[c+3],10,2399980690),f=l(f,E,g,h,s[c+10],15,4293915773),h=l(h,f,E,g,s[c+1],21,2240044497),g=l(g,h,f,E,s[c+8],6,1873313359),E=l(E,g,h,f,s[c+15],10,4264355552),f=l(f,E,g,h,s[c+6],15,2734768916),h=l(h,f,E,g,s[c+13],21,1309151649),g=l(g,h,f,E,s[c+4],6,4149444226),E=l(E,g,h,f,s[c+11],10,3174756917),f=l(f,E,g,h,s[c+2],15,718787259),h=l(h,f,E,g,s[c+9],21,3951481745),g=t(g,m),h=t(h,u),f=t(f,p),E=t(E,d);return(i(g)+i(h)+i(f)+i(E)).toLowerCase()}var C=t(165),v=t(87),k=t.n(v),w={FirebaseConfig:{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/react-chat"}).FIREBASE_API_KEY,authDomain:"fir-chat-2a1fe.firebaseapp.com",databaseURL:"https://fir-chat-2a1fe.firebaseio.com",projectId:"fir-chat-2a1fe",storageBucket:"fir-chat-2a1fe.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/react-chat"}).FIREBASE_MSG_SENDER_ID},actual:"5f4dcc3b5aa765d61d8327deb882cf99",FirebaseRef:{messageDB:"reactMuiChatMsgDB",mediaDB:"reactMuiChatMediaDB",storageBucket:"reactMuiChatUploads"},message:{from:"",hasMedia:"",mediaType:"",downURL:"",message:"",repliedTo:{from:"",text:"",isMedia:!0,mediaType:"",downURL:""}},customColors:{wrapperPaper:"#BBDEFB",chatboxBar:"#282c34",messageBackgroung:"#f5f5f5"}},O=Object(C.a)(function(e){return{card:{},avatar:{margin:"auto",backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});var j=Object(i.b)(function(e){return{session:e.session}})(function(e){m.a.apps.length||m.a.initializeApp(w.FirebaseConfig);var a=O(),t=Object(n.useState)(""),o=Object(s.a)(t,2),l=o[0],i=o[1],c=Object(n.useState)(""),C=Object(s.a)(c,2),v=C[0],j=C[1],S=Object(n.useState)(""),T=Object(s.a)(S,2),R=T[0],B=T[1];return r.a.createElement("div",{className:"login"},r.a.createElement(u.a,{maxWidth:"sm"},r.a.createElement(p.a,{className:a.card},r.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),l&&v)if(y(v)===w.actual){var t={userName:l,uChar:l.split("")[0],time:new Date};e.dispatch({type:"SET_SESSION",session:t}),console.log("login")}else B("Invalid UserName/ Password");else B("Invalid UserName/ Password")}},r.a.createElement(d.a,null,r.a.createElement(g.a,{className:a.avatar},r.a.createElement(k.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"ChatBox"),r.a.createElement(f.a,{onChange:function(e){i(e.target.value),R&&B("")},value:l,className:"loginInputs",required:!0,id:"outlined-uncontrolled",label:"User Name",placeholder:"User Name",margin:"normal",variant:"outlined",style:{width:300}}),r.a.createElement("br",null),r.a.createElement(f.a,{required:!0,onChange:function(e){j(e.target.value),R&&B("")},value:v,className:"loginInputs",id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",margin:"normal",variant:"outlined",style:{width:300}}),r.a.createElement(h.a,null,R)),r.a.createElement(E.a,null,r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{width:"90%",marginLeft:50,marginRight:50}},"Login"))))))}),S=t(77),T=t.n(S),R=t(88),B=t(46),N=t(47),L=t(50),M=t(48),I=t(51),D=t(95),U=t(94),x=t(174),_=t(175),A=t(176),F=t(177),P=t(90),G=t.n(P),Y=t(26),W=Object(C.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},bar:{backgroundColor:w.customColors.chatboxBar}}});var V=Object(i.b)(function(e){return{session:e.session}})(function(e){var a=W(),t=r.a.useState(null),n=Object(s.a)(t,2),o=n[0],l=n[1];function i(){l(null)}return r.a.createElement("div",{className:a.root},r.a.createElement(U.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:i},r.a.createElement(x.a,{onClick:i},"Media"),r.a.createElement(x.a,{onClick:i},r.a.createElement("strong",null,"As ",e.session.userName)),r.a.createElement(x.a,{onClick:function(){l(null),y(window.prompt("Please Enter Your Password"))===w.actual&&window.confirm("It can't be undone. Are you sure?")&&Object(Y.database)().ref().child(w.FirebaseRef.messageDB).remove(function(a){a?console.log(a):(console.log("Cleared"),e.dispatch({type:"DATA_CLEARED"}))})}},"RemoveAll")),r.a.createElement(_.a,{position:"fixed",className:a.bar},r.a.createElement(A.a,null,r.a.createElement(F.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"Menu",onClick:function(e){l(e.currentTarget)}},r.a.createElement(G.a,null)),r.a.createElement(h.a,{variant:"h6",className:a.title},"ChatBox"),r.a.createElement(b.a,{color:"inherit",onClick:function(){e.dispatch({type:"RESET_STATE"})}},"Logout"))))}),z=t(29),H=t(19),K=t(91),q=t(178),J=Object(C.a)(function(e){var a;return{replyBar:e.mixins.toolbar,textField:(a={marginLeft:e.spacing(1),marginRight:e.spacing(1),padding:e.spacing(1,1,1,1),transition:e.transitions.create("width"),width:"70%"},Object(z.a)(a,e.breakpoints.up("md"),{width:500}),Object(z.a)(a,e.breakpoints.down("sm"),{minWidth:140}),a)}});var $=Object(i.b)(function(e){return{reply:e.reply}})(function(e){var a=J();return 0!==Object.keys(e.reply).length?r.a.createElement(A.a,null,r.a.createElement(f.a,{disabled:!0,multiline:!0,id:"filled-disabled",label:e.reply.from,defaultValue:e.reply.isMedia?e.reply.mediaType:e.reply.text,className:a.textField,margin:"normal",InputProps:{readOnly:!0},variant:"filled"}),r.a.createElement(F.a,{edge:"end",key:"clearIcon","aria-label":"clearReply",color:"inherit",onClick:function(){return e.dispatch({type:"RESET_REPLY"})}},r.a.createElement(q.a,null))):r.a.createElement("div",null)}),Q=t(189),X=t(200),Z=t(194),ee=t(195),ae=t(196),te=t(201),ne=t(190),re=t(191),oe=t(192),le=t(193),ie=t(197),se=t(92),ce=t.n(se),me=t(93),ue=t(182),pe=t(183),de=t(184),ge=t(185),he=t(186),fe=t(188),Ee=t(135),be=t(187),ye=t(179),Ce=t(180),ve=t(181);function ke(e){var a=r.a.useState(!1),t=Object(s.a)(a,2),n=t[0],o=t[1];return n?r.a.createElement(b.a,{variant:"outlined",onClick:o(!0)},"Load Image"):r.a.createElement("img",{src:e.src,alt:e.src,style:{maxWidth:200}})}function we(e){var a=r.a.useState(!1),t=Object(s.a)(a,2),n=t[0],o=t[1];return n?r.a.createElement("video",{src:e.src,style:{maxWidth:200},controls:!0}):r.a.createElement(b.a,{variant:"outlined",onClick:function(){return o(!0)}},"Load Video")}var Oe=Object(C.a)(function(e){return{success:{backgroundColor:ye.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:Ce.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},orangeAvatar:{color:"#fff",backgroundColor:ve.a[500]}}}),je=function(e){function a(e){var t;return Object(B.a)(this,a),(t=Object(L.a)(this,Object(M.a)(a).call(this,e))).handleClose=function(){t.setState({anchorEl:null})},t.handleMenuClick=function(e){t.setState({anchorEl:e.currentTarget})},t.handleReplyButton=function(){var e={};t.props.msg.hasMedia?e={isMedia:!0,mediaType:t.props.msg.mediaType,downURL:t.props.msg.downURL}:e.text=t.props.msg.message,e.from=t.props.msg.from,t.props.dispatch({type:"SET_REPLY",reply:e})},t.handleDeleteButton=function(){t.props.msg.from.split("")[0]===t.props.session.uChar&&window.confirm("Confirm?")?t.props.delete(t.props.msgKey):window.alert("Its Not Urs")},t.handleInfoButton=function(){window.alert("At "+t.props.msg.at)},t.state={anchorEl:null},t}return Object(I.a)(a,e),Object(N.a)(a,[{key:"render",value:function(){var e=null;e=this.props.msg.from.split("")[0]!==this.props.session.uChar?r.a.createElement(g.a,{size:"small",className:Oe.orangeAvatar,component:"span"},this.props.msg.from.split("")[0]):r.a.createElement(g.a,{size:"small",component:"span"},this.props.session.uChar);var a=this.props.msg.hasMedia?r.a.createElement("span",null,r.a.createElement(x.a,{onClick:this.handleClose},r.a.createElement(F.a,{key:"msgMenu","aria-label":"menu",color:"inherit"},r.a.createElement("a",{href:this.props.msg.downURL,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ue.a,{className:Oe.icon})))),r.a.createElement(x.a,{onClick:this.handleClose},r.a.createElement(F.a,{key:"msgMenu","aria-label":"menu",color:"inherit"},r.a.createElement("a",{href:this.props.msg.downURL,download:!0,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(pe.a,{className:Oe.icon}))))):null;return r.a.createElement(Ee.a,{disableGutters:!0},r.a.createElement(U.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleClose},r.a.createElement(x.a,{onClick:this.handleClose},r.a.createElement(F.a,{key:"replyIcon","aria-label":"reply",color:"inherit",onClick:this.handleReplyButton},r.a.createElement(de.a,{className:Oe.icon}))),r.a.createElement(x.a,{onClick:this.handleClose},r.a.createElement(F.a,{key:"deleteIcon","aria-label":"delete",color:"inherit",onClick:this.handleDeleteButton},r.a.createElement(ge.a,{className:Oe.icon}))),a,r.a.createElement(x.a,{onClick:this.handleClose},r.a.createElement(F.a,{key:"infoIcon","aria-label":"info",color:"inherit",onClick:this.handleInfoButton},r.a.createElement(he.a,{className:Oe.icon})))),r.a.createElement(F.a,{key:"msgMenu","aria-label":"menu",color:"inherit",onClick:this.handleMenuClick},e),r.a.createElement("div",{className:"message"},r.a.createElement(be.a,{container:!0,wrap:"nowrap"},r.a.createElement(be.a,{item:!0},r.a.createElement("span",{id:"repliesHandlers"},this.props.msg.repliedTo&&this.props.msg.repliedTo.text&&r.a.createElement(f.a,{disabled:!0,multiline:!0,id:"filled-disabled",label:this.props.msg.repliedTo.from,defaultValue:this.props.msg.repliedTo.text,className:Oe.textField,margin:"normal",InputProps:{readOnly:!0},variant:"filled"}),this.props.msg.repliedTo&&this.props.msg.repliedTo.isMedia&&"image"===this.props.msg.repliedTo.mediaType&&r.a.createElement(ke,{src:this.props.msg.repliedTo.downURL}),this.props.msg.repliedTo&&this.props.msg.repliedTo.isMedia&&"video"===this.props.msg.repliedTo.mediaType&&r.a.createElement(we,{src:this.props.msg.repliedTo.downURL}),this.props.msg.repliedTo&&this.props.msg.repliedTo.isMedia&&"doc"===this.props.msg.repliedTo.mediaType&&r.a.createElement(fe.a,null)),r.a.createElement("div",null,this.props.msg.hasMedia&&"image"===this.props.msg.mediaType&&r.a.createElement(ke,{src:this.props.msg.downURL}),this.props.msg.hasMedia&&"video"===this.props.msg.mediaType&&r.a.createElement(we,{src:this.props.msg.downURL}),this.props.msg.hasMedia&&"doc"===this.props.msg.mediaType&&r.a.createElement(fe.a,null)),r.a.createElement(h.a,null,this.props.msg.message)))))}}]),a}(n.Component);var Se=Object(i.b)(function(e){return{session:e.session,reply:e.reply}})(je),Te=t(171),Re=Object(C.a)(function(e){return{appbarHeight:e.mixins.toolbar,text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:"50px"},list:{},subheader:{backgroundColor:e.palette.background.paper},grow:{flexGrow:1}}}),Be=function(e){function a(e){var t;return Object(B.a)(this,a),(t=Object(L.a)(this,Object(M.a)(a).call(this,e))).scrollToBottom=function(){t.MessagesList.scrollIntoView({behavior:"smooth"})},t.componentDidMount=function(){t.scrollToBottom(),t.state.msgDB.on("child_added",function(e){t.setState({msgs:[].concat(Object(me.a)(t.state.msgs),[{key:e.key,data:e.val()}])})})},t.componentWillUnmount=function(){t.state.msgDB.off()},t.handleDeleteMessage=function(e){t.state.msgDB.child(e).remove(),t.setState(function(a){return{msgs:a.msgs.filter(function(a){return a.key!==e})}})},t.state={msgs:[],msgDB:Object(Y.database)().ref().child(w.FirebaseRef.messageDB)},t.MessagesList=r.a.createRef(),t}return Object(I.a)(a,e),Object(N.a)(a,[{key:"componentDidUpdate",value:function(){this.scrollToBottom(),this.props.chatCleared&&(this.setState({msgs:[]}),this.props.dispatch({type:"RELOADED"}))}},{key:"render",value:function(){var e=this,a=this.state.msgs.map(function(a){return r.a.createElement(Se,{key:a.key,msgKey:a.key,msg:a.data,delete:e.handleDeleteMessage})});return r.a.createElement("div",{className:Re.paper,style:{marginBottom:"50px",marginTop:"50px"}},r.a.createElement(Te.a,{className:Re.list,disablePadding:!0,dense:!0},a),r.a.createElement("div",{className:Re.appbarHeight,ref:function(a){return e.MessagesList=a}}))}}]),a}(n.Component);var Ne=Object(i.b)(function(e){return{chatCleared:e.chatCleared,lastSeen_n:e.lastSeen_n,lastSeen_b:e.lastSeen_b}})(Be),Le=function(){var e=new Date,a=e.getUTCDate(),t=e.getUTCMonth()+1,n=e.getUTCFullYear(),r=e.getHours(),o=e.getMinutes();return o=o<10?"0"+o:o,r<12?(r=r<10?"0"+r:r,o+="AM"):12===r?o+="PM":(r-=12,o+="PM"),r+":"+o+" "+a+"/"+t+"/"+n},Me=Object(C.a)(function(e){var a;return{appbarHeight:e.mixins.toolbar,text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},appBar:{backgroundColor:"#424242",top:"auto",bottom:0},appBarOffline:{backgroundColor:e.secondary,top:"auto",bottom:0},grow:{flexGrow:1},messageInputBar:Object(z.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(H.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(H.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),fileInput:{display:"none"},inputRoot:{color:"inherit"},inputInput:(a={padding:e.spacing(1,1,1,1),transition:e.transitions.create("width"),width:"100%"},Object(z.a)(a,e.breakpoints.up("md"),{width:600}),Object(z.a)(a,e.breakpoints.down("sm"),{minWidth:230}),a)}});var Ie=Object(i.b)(function(e){return{session:e.session,reply:e.reply}})(function(e){var a=Me();m.a.apps.length||m.a.initializeApp(w.FirebaseConfig);var t=r.a.useState(null),n=Object(s.a)(t,2),o=n[0],l=n[1],i=r.a.useState(""),c=Object(s.a)(i,2),u=c[0],p=c[1],d=r.a.useState(!1),g=Object(s.a)(d,2),h=g[0],E=g[1],y=r.a.useState(null),C=Object(s.a)(y,2),v=C[0],k=C[1],O=Object(Y.database)().ref().child(w.FirebaseRef.messageDB),j=Object(Y.database)().ref().child(w.FirebaseRef.mediaDB),S=Object(Y.storage)().ref().child(w.FirebaseRef.storageBucket),T=document.getElementById("addIcon");function R(a,t){if(!t)return 0;var n={from:e.session.userName,hasMedia:!0,mediaType:a,at:Le(),downURL:t};0!==Object.keys(e.reply).length&&(n.repliedTo=e.reply.isMedia?{from:e.reply.from,isMedia:!0,mediaType:e.reply.mediaType,downURL:e.reply.downURL}:{from:e.reply.from,text:e.reply.text},e.dispatch({type:"RESET_REPLY"})),console.log(n),O.push().set(n),j.push().set(n)}function B(e,a){var t=e.target.files[0];if(t){var n=S.child(t.type.split("/")[0]+"_"+Le()).put(t);n.on("state_changed",function(e){switch(T.classList.add("upload"),console.log("Upload Started"),e.state){case m.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case m.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){console.log("Upload Failed"),T.classList.remove("upload"),window.alert("Upload Failed, Please Retry")},function(){console.log("Upload Completed"),n.snapshot.ref.getDownloadURL().then(function(e){T.classList.remove("upload"),R(a,e)})})}else console.log("No File")}function N(e){l(e.currentTarget)}function L(){l(null)}function M(){if(""===u)e.dispatch({type:"SET_REPLY",reply:{text:"Empty Message"}}),setTimeout(function(){return e.dispatch({type:"RESET_REPLY"})},500);else{var a={from:e.session.userName,hasMedia:!1,message:u,at:Le()};0!==Object.keys(e.reply).length&&(a.repliedTo=e.reply.isMedia?{from:e.reply.from,isMedia:!0,mediaType:e.reply.mediaType,downURL:e.reply.downURL}:{from:e.reply.from,text:e.reply.text},e.dispatch({type:"RESET_REPLY"})),O.push().set(a),p("")}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,null),r.a.createElement(U.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:L},r.a.createElement(x.a,{onClick:L},r.a.createElement("input",{accept:"image/*",className:a.fileInput,id:"contained-button-file-image",type:"file",onChange:function(e){B(e,"image")}}),r.a.createElement("label",{htmlFor:"contained-button-file-image"},r.a.createElement(Q.a,null,r.a.createElement(ne.a,null)))),r.a.createElement(x.a,{onClick:L},r.a.createElement("input",{accept:"video/*",className:a.fileInput,id:"contained-button-file-video",type:"file",onChange:function(e){B(e,"video")}}),r.a.createElement("label",{htmlFor:"contained-button-file-video"},r.a.createElement(Q.a,null,r.a.createElement(re.a,null)))),r.a.createElement(x.a,{onClick:L},r.a.createElement(Q.a,{onClick:function(){return E(!0)}},r.a.createElement(oe.a,null))),r.a.createElement(x.a,{onClick:L},r.a.createElement("input",{className:a.fileInput,id:"contained-button-file-doc",type:"file",onChange:function(e){B(e,"doc")}}),r.a.createElement("label",{htmlFor:"contained-button-file-doc"},r.a.createElement(Q.a,null,r.a.createElement(le.a,null))))),r.a.createElement(X.a,{open:h,onClose:function(){return E(!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(Z.a,{id:"form-dialog-title"},"GIF Input"),r.a.createElement(ee.a,null,r.a.createElement(f.a,{autoFocus:!0,margin:"dense",id:"gifInput",label:"GIF",placeholder:"Input GIF from keyboard",type:"url",onChange:function(e){return k(e.target.value)},fullWidth:!0})),r.a.createElement(ae.a,null,r.a.createElement(b.a,{onClick:function(){return E(!1)},color:"primary"},"Cancel"),r.a.createElement(b.a,{onClick:function(){E(!1),v?(R("image",v),k(null)):window.alert("Please Input the GIF")},color:"primary"},"Send GIF"))),r.a.createElement(K.Detector,{render:function(e){var t=e.online;return r.a.createElement(_.a,{position:"fixed",color:"primary",className:t?a.appBar:a.appBarOffline},r.a.createElement($,null),r.a.createElement(A.a,null,r.a.createElement(F.a,{edge:"start",color:"inherit","aria-label":"Open drawer",onClick:N},r.a.createElement(ce.a,{id:"addIcon"})),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.messageInputBar},r.a.createElement(te.a,{multiline:!0,placeholder:"Message...",classes:{root:a.inputRoot,input:a.inputInput},value:u,onChange:function(e){return p(e.target.value)},inputProps:{"aria-label":"Message"}})),r.a.createElement(F.a,{edge:"end",color:"inherit",onClick:M},r.a.createElement(ie.a,null))))}}))}),De=function(e){function a(){var e,t;Object(B.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(L.a)(this,(e=Object(M.a)(a)).call.apply(e,[this].concat(r)))).componentDidMount=Object(R.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.apps.length||Y.initializeApp(w.FirebaseConfig);case 1:case"end":return e.stop()}},e)})),t}return Object(I.a)(a,e),Object(N.a)(a,[{key:"render",value:function(){return r.a.createElement(D.a,{style:{flex:2,flexDirection:"column",justifyContent:"center",alignContent:"space-between",margin:10,backgroundColor:w.customColors.wrapperPaper,width:"100%"}},r.a.createElement(V,null),r.a.createElement(Ie,null))}}]),a}(n.Component);t(131);var Ue=Object(i.b)(function(e){return{session:e.session}})(function(e){return 0===Object.keys(e.session).length?r.a.createElement(j,null):r.a.createElement(De,null)}),xe=t(57),_e=t(30),Ae={chatCleared:!1,session:{},reply:{},lastSeen_n:null,lastSeen_b:null};var Fe=Object(xe.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_SESSION":return Object(_e.a)({},e,{session:a.session});case"RESET_STATE":return Object(_e.a)({},Ae);case"SET_REPLY":return Object(_e.a)({},e,{reply:a.reply});case"RESET_REPLY":return Object(_e.a)({},e,{reply:{}});case"DATA_CLEARED":return Object(_e.a)({},e,{chatCleared:!0});case"RELOADED":return Object(_e.a)({},e,{chatCleared:!1});case"N_LASTSEEN":return Object(_e.a)({},e,{lastSeen_n:a.nStatus});case"B_LASTSEEN":return Object(_e.a)({},e,{lastSeen_b:a.bStatus})}return e});var Pe=function(){return r.a.createElement(i.a,{store:Fe},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(Ue,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,a,t){e.exports=t(132)}},[[99,1,2]]]);
//# sourceMappingURL=main.08027bd1.chunk.js.map